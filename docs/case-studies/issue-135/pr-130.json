{
  "body": "## Summary\n\nFixes #129 - Removes extra quotes that appear around release notes when using manual instant releases.\n\n## Problem\n\nRelease v0.8.40 showed escaped quotes around the release notes:\n\n**Expected:**\n```\nTest patch release (instant)\n```\n\n**Actual:**\n```\n''Test patch release (instant)''\n```\n\n## Root Cause\n\nThe issue was caused by **double-quoting** - adding manual quotes when command-stream already provides auto-quoting:\n\n**In workflow file (.github/workflows/release.yml:233):**\n```yaml\n--description \"${{ github.event.inputs.description }}\"\n```\n\nThe double quotes here are treated as part of the value, not as YAML syntax, because command-stream's template literal syntax already handles quoting.\n\n**Evidence from experiment:**\n```javascript\n// Without quotes (correct):\nconst result = await $`script --description ${value}`;\n// Received: \"Test patch release (instant)\" ‚úÖ\n\n// With quotes (incorrect):\nconst result = await $`script --description \"${value}\"`;\n// Received: \"'Test patch release (instant)'\" ‚ùå (char code 39 at start/end)\n```\n\n## Solution\n\n**Rely on command-stream's built-in auto-quoting** instead of adding manual quotes:\n\n1. **Workflow file**: Remove quotes from `--description` parameter\n   ```yaml\n   # Before:\n   --description \"${{ github.event.inputs.description }}\"\n\n   # After:\n   --description ${{ github.event.inputs.description }}\n   ```\n\n2. **version-and-commit.mjs**: Pass description via command-line args (not env vars)\n   ```javascript\n   // Before: Used environment variable to avoid escaping\n   process.env.DESCRIPTION = description;\n\n   // After: Direct interpolation, relying on command-stream auto-quoting\n   await $`node scripts/instant-version-bump.mjs --bump-type ${bumpType} --description ${description}`;\n   ```\n\n3. **instant-version-bump.mjs**: Remove defensive quote stripping\n   ```javascript\n   // Before: Defensive quote stripping\n   const description = (descriptionArg || `Manual ${bumpType} release`).replace(/^['\"]|['\"]$/g, '');\n\n   // After: Trust command-stream auto-quoting\n   const finalDescription = description || `Manual ${bumpType} release`;\n   ```\n\nThis simpler approach avoids the double-quoting issue entirely by trusting command-stream's auto-quoting behavior.\n\n## Changes Made\n\n- **.github/workflows/release.yml**: Removed quotes from `--description` parameter\n- **scripts/version-and-commit.mjs**: Pass description via command-line args instead of environment variable\n- **scripts/instant-version-bump.mjs**: Removed defensive quote stripping\n- **experiments/issue-129/**: Added experiment script demonstrating command-stream's auto-quoting behavior\n\n## Testing\n\n- Created experiment script (`test-command-stream-quoting.mjs`) that clearly demonstrates:\n  - Without quotes: description received correctly ‚úÖ\n  - With quotes: quotes become part of the value ‚ùå\n- All lint checks pass ‚úÖ\n- All unit tests pass ‚úÖ\n- CI checks pass ‚úÖ\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n",
  "files": [
    ".changeset/fix-release-notes-quotes.md",
    "docs/case-studies/issue-129/README.md",
    "docs/case-studies/issue-129/recent-ci-runs.json",
    "docs/case-studies/issue-129/release-v0.8.40.json",
    "experiments/issue-129/test-command-stream-quoting.mjs",
    "experiments/issue-129/test-quote-stripping.mjs",
    "scripts/format-release-notes.mjs",
    "scripts/instant-version-bump.mjs",
    "scripts/version-and-commit.mjs"
  ],
  "title": "fix: remove extra quotes from release notes"
}
